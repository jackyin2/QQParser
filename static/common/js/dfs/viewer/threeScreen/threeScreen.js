!function(e){var t={key:"threeScreen: ",log:function(e){console&&console.log(t.key+e)}},r={timeFormat:function(e,t){if(0>e)return"-";var r=e%864e5,a=r%36e5,n=a%6e4,c={"d+":Math.floor(e/864e5),"h+":Math.floor(r/36e5),"m+":Math.floor(a/6e4),"s+":Math.round(n/1e3)};for(var l in c)new RegExp("("+l+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?c[l]:("00"+c[l]).substr((""+c[l]).length)));return t}},a=function(t,r){var a=this,n=(new Date).getTime();if(e(".player_teachers",t).attr("id","player_teachers_"+n),e(".player_screen",t).attr("id","player_screen_"+n),a.teacher=jwplayer(e(".player_teachers").attr("id")).setup({flashplayer:r.flashplayer,file:r.teachersUrl,autostart:!1,provider:"http",startparam:"start",width:"100%",height:"100%",skin:r.skin,base:r.baseUrl+"viewer/jwplayer/"}),a.teacher.on("ready",function(){e(".jwclick",t).remove(),a.teacher.ready=!0}),a.teacher.on("pause",function(){a.screen.pause()}),a.teacher.on("play",function(){a.screen.play()}),a.teacher.on("complete",function(){a.screen.stop()}),a.teacher.on("seek",function(e){a.screen.seek(e.offset)}),a.screen=jwplayer(e(".player_screen").attr("id")).setup({flashplayer:r.flashplayer,file:r.screenUrl,autostart:!1,provider:"http",startparam:"start",width:"100%",height:"100%",controls:!1,skin:r.skin,base:r.baseUrl+"viewer/jwplayer/"}),a.screen.on("ready",function(){e(".jwclick",t).remove(),a.screen.ready=!0}),setInterval(function(){var r=a.teacher.getPosition();Math.abs(r-a.screen.getPosition())>3&&a.screen.seek(parseInt(r)),e(".video-text .video-catalog",t).each(function(t,a){var n=e("li",a).eq(0);e("li",a).each(function(t){var a=e(this);return a.data("time")>r?!1:void(n=a)}),n&&(n.siblings(".current").removeClass("current"),n.addClass("current"))})},2e3),r.autoStart)var c=setInterval(function(){a.teacher.ready&&a.screen.ready&&(a.teacher.play(),window.clearInterval(c),e(".video-list",t).fadeIn())},500);e(".video-text .video-catalog li",t).click(function(){var t=e(this);t.siblings(".current").removeClass("current"),t.addClass("current"),a.teacher.seek(parseInt(t.data("time")))})},n=["playerHtml","playerCss","teachersUrl","screenUrl","directoryData","flashplayer","skin","baseUrl","callback"],c=["autoStart"];e.fn.threeScreen=function(l){var i=this;l=l||{};var o={};e.each(n,function(e,r){var a=n[e];return l.debug||l[a]?void(o[a]=l[a]):(t.log("["+a+"] can not is null!"),!1)}),e.each(c,function(e,t){var r=c[e];l[r]&&(o[r]=l[r])});for(var p=0;p<o.directoryData.indextree.length;p++){var s=o.directoryData.indextree[p];s.title=s.title.replace(/\(\d+:\d+:\d+\)$/,""),s.showTime=r.timeFormat(1e3*s.time,"hh:mm:ss")}e.ajax({type:"GET",url:o.playerHtml,async:!1,dataType:"text",success:function(t){t=baidu.template(t,o),i.html(t);var r=new a(i,o);o.callback&&e.isFunction(o.callback)&&o.callback.apply(null,[r])}})}}(jQuery),function(e){var t="undefined"==typeof module?e.baidu=e.baidu||{}:module.exports;t.template=function(t,a){var n=function(){if(!e.document)return r._compile(t);var a=document.getElementById(t);if(a){if(r.cache[t])return r.cache[t];var n=/^(textarea|input)$/i.test(a.nodeName)?a.value:a.innerHTML;return r._compile(n)}return r._compile(t)}(),c=r._isObject(a)?n(a):n;return n=null,c};var r=t.template;r.versions=r.versions||[],r.versions.push("1.0.6"),r.cache={},r.LEFT_DELIMITER=r.LEFT_DELIMITER||"<%",r.RIGHT_DELIMITER=r.RIGHT_DELIMITER||"%>",r.ESCAPE=!0,r._encodeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},r._encodeReg=function(e){return String(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},r._encodeEventHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\n/g,"\n").replace(/\\r/g,"\r")},r._compile=function(e){var t="var _template_fun_array=[];\nvar fn=(function(__data__){\nvar _template_varName='';\nfor(name in __data__){\n_template_varName+=('var '+name+'=__data__[\"'+name+'\"];');\n};\neval(_template_varName);\n_template_fun_array.push('"+r._analysisStr(e)+"');\n_template_varName=null;\n})(_template_object);\nfn = null;\nreturn _template_fun_array.join('');\n";return new Function("_template_object",t)},r._isObject=function(e){return"function"==typeof e||!(!e||"object"!=typeof e)},r._analysisStr=function(e){var t=r.LEFT_DELIMITER,a=r.RIGHT_DELIMITER,n=r._encodeReg(t),c=r._encodeReg(a);return e=String(e).replace(new RegExp("("+n+"[^"+c+"]*)//.*\n","g"),"$1").replace(new RegExp("<!--.*?-->","g"),"").replace(new RegExp(n+"\\*.*?\\*"+c,"g"),"").replace(new RegExp("[\\r\\t\\n]","g"),"").replace(new RegExp(n+"(?:(?!"+c+")[\\s\\S])*"+c+"|((?:(?!"+n+")[\\s\\S])+)","g"),function(e,t){var r="";if(t)for(r=t.replace(/\\/g,"&#92;").replace(/'/g,"&#39;");/<[^<]*?&#39;[^<]*?>/g.test(r);)r=r.replace(/(<[^<]*?)&#39;([^<]*?>)/g,"$1\r$2");else r=e;return r}),e=e.replace(new RegExp("("+n+"[\\s]*?var[\\s]*?.*?[\\s]*?[^;])[\\s]*?"+c,"g"),"$1;"+a).replace(new RegExp("("+n+":?[hvu]?[\\s]*?=[\\s]*?[^;|"+c+"]*?);[\\s]*?"+c,"g"),"$1"+a).split(t).join("	"),e=r.ESCAPE?e.replace(new RegExp("\\t=(.*?)"+c,"g"),"',typeof($1) === 'undefined'?'':baidu.template._encodeHTML($1),'"):e.replace(new RegExp("\\t=(.*?)"+c,"g"),"',typeof($1) === 'undefined'?'':$1,'"),e=e.replace(new RegExp("\\t:h=(.*?)"+c,"g"),"',typeof($1) === 'undefined'?'':baidu.template._encodeHTML($1),'").replace(new RegExp("\\t(?::=|-)(.*?)"+c,"g"),"',typeof($1)==='undefined'?'':$1,'").replace(new RegExp("\\t:u=(.*?)"+c,"g"),"',typeof($1)==='undefined'?'':encodeURIComponent($1),'").replace(new RegExp("\\t:v=(.*?)"+c,"g"),"',typeof($1)==='undefined'?'':baidu.template._encodeEventHTML($1),'").split("	").join("');").split(a).join("_template_fun_array.push('").split("\r").join("\\'")}}(window);